Resources:
  ServerlessOps:
    Type: "AWS::Route53::HostedZone"
    Properties:
      Name: "serverlessops.io"
      HostedZoneConfig:
        Comment: ServerlessOps

  ServerlessOpsRR:
    Type: "AWS::Route53::RecordSetGroup"
    Properties:
      Comment: "Apex Records"
      HostedZoneId:
        Ref: ServerlessOps
      RecordSets:
        - Name: "serverlessops.io."
          Type: "MX"
          TTL: 300
          ResourceRecords:
            - 1 aspmx.l.google.com
            - 5 alt1.aspmx.l.google.com
            - 5 alt2.aspmx.l.google.com
            - 10 alt3.aspmx.l.google.com
            - 10 alt4.aspmx.l.google.com
            - 15 n2235kmtje5chj5uz63i3sluem7gtehtp5dlmladr2nfntojbqpq.mx-verification.google.com.

  ServerlessOpsWww:
    Type: "AWS::Route53::RecordSet"
    Properties:
      Comment: "Apex Records"
      HostedZoneId:
        Ref: ServerlessOps
      Name: "www.serverlessops.io."
      Type: "CNAME"
      TTL: 3600
      ResourceRecords:
        - 277116.group16.sites.hubspot.net

Outputs:
  ServerlessOpsNameServers:
    Description: Hosted zone name servers
    Value:
      Fn::Join:
        - ','
        - Fn::GetAtt:
          - ServerlessOps
          - NameServers
    Export:
      Name: ${self:service}-${self:provider.stage}-ServerlessOpsNameServers

